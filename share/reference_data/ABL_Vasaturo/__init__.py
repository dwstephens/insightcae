#!/usr/bin/python

import re
import numpy as np

import inspect, os
basedir=os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe()))) # script directory

def getToC():
  toc={}
  for case in ['rural','suburban','urban']:
    toc.update({
      "%s/umeanByUstar_vs_zH"%case: None,
      "%s/umeanByUstar_vs_zH@"%case: [0, 0.75],
      "%s/kByUstar2_vs_zH"%case: None,
      "%s/kByUstar2_vs_zH@"%case: [0, 0.75]
      })
  return toc

##
## Data from Vasaturo, Blocken et. al, Fig. 5
##
kByUstar2_vs_zH={
  None: np.array([
[0.0449753449756, 3.46968238691],
[0.0395985283018, 3.60442733397],
[0.0146376110125, 3.53705486044],
[0.0220875267274, 3.77285851781],
[0.0315229183241, 3.72954764196],
[0.0180289518045, 3.68142444658],
[0.00988259423894, 3.28200192493],
[0.00169859116796, 2.60346487007],
[0.00510096598738, 2.82964388835],
[0.00579740783805, 2.99326275265],
[0.00784389540113, 3.16650625602],
[0.0126002102956, 3.43118383061],
[0.0159986907524, 3.62848893167],
[0.0214079604481, 3.7343599615],
[0.0261370148041, 3.7969201155],
[0.0295049894203, 3.76804619827],
[0.0355633195547, 3.68623676612],
[0.0422869366387, 3.53705486044],
[0.0483348818061, 3.37824831569],
[0.0611103384201, 3.09913378248],
[0.0530373246841, 3.24350336862],
[0.0685115746021, 2.97401347449],
[0.0779300906274, 2.80558229066],
[0.0927448951396, 2.64677574591],
[0.11227642186, 2.45909528393],
[0.134509987186, 2.30510105871],
[0.153374928835, 2.17516843118],
[0.189091426653, 1.9874879692],
[0.21672647295, 1.88161693936],
[0.238293453206, 1.7853705486],
[0.270648467012, 1.67468719923],
[0.297609788573, 1.57362848893],
[0.32255188311, 1.50144369586],
[0.371082132108, 1.31857555342],
[0.40411151971, 1.20789220404],
[0.443207026172, 1.07314725698],
[0.469498517361, 1.00577478345],
[0.491068742918, 0.933589990375],
[0.513987716068, 0.861405197305],
[0.542976053379, 0.789220404235],
[0.570616941219, 0.726660250241],
[0.594212235346, 0.668912415784],
[0.627923785469, 0.615976900866],
[0.651522324897, 0.5822906641],
[0.671749644408, 0.553416746872],
[0.694675757222, 0.53416746872]
]),
  
  0: np.array([
[0.00237231590328, 2.59865255053],
[0.00378012799472, 3.03657362849],
[0.0173708045197, 3.80173243503],
[0.00923288473985, 3.46487006737],
[0.0261759584305, 4.08565928778],
[0.0376253845683, 3.9749759384],
[0.0463584927704, 3.72473532243],
[0.0544159290558, 3.46487006737],
[0.0638227619932, 3.20981713186],
[0.0873700256472, 2.79595765159],
[0.117006774337, 2.531280077],
[0.15002253167, 2.31953801732],
[0.169557952752, 2.16073147257],
[0.207293677595, 1.94417709336],
[0.247728844802, 1.74205967276],
[0.287493532576, 1.56881616939],
[0.330632036511, 1.41000962464],
[0.367701825343, 1.25601539942],
[0.407468460299, 1.09720885467],
[0.449931292316, 0.928777670837],
[0.50992200148, 0.717035611165],
[0.567896728921, 0.55822906641],
[0.628574793089, 0.442733397498],
[0.689934370717, 0.380173243503]
])
  
  }
  
umeanByUstar_vs_zH={
0.75: np.array([
[0.0121856866538, 6.78294573643],
[0.00676982591876, 5],
[0.00135396518375, 3.41085271318],
[0.0446808510638, 11.007751938],
[0.0893617021277, 12.3255813953],
[0.150290135397, 13.1007751938],
[0.211218568665, 13.6046511628],
[0.269439071567, 13.992248062],
[0.331721470019, 14.3023255814],
[0.391295938104, 14.6511627907],
[0.469825918762, 15],
[0.529400386847, 15.2713178295],
[0.571373307544, 15.3875968992],
[0.629593810445, 15.6201550388],
[0.671566731141, 15.8914728682],
[0.691876208897, 15.8914728682],
[0.0676982591876, 11.8217054264],
[0.0297872340426, 9.96124031008],
[0.116441005803, 12.7131782946],
[0.430560928433, 14.8062015504],
[0.180077369439, 13.3720930233]
]),

0.: np.array([
[0.00135658914729, 3.75984015384],
[0.00542635658915, 5.27191875488],
[0.0108527131783, 7.01670572682],
[0.0135658914729, 8.3348356469],
[0.0230620155039, 9.61495703383],
[0.037984496124, 11.3995553152],
[0.0556201550388, 12.4867796406],
[0.0759689922481, 13.2254672195],
[0.101744186047, 13.887236344],
[0.132945736434, 14.4333273241],
[0.168217054264, 14.9798689983],
[0.208914728682, 15.5657712878],
[0.248255813953, 16.0352442762],
[0.290310077519, 16.4274983475],
[0.35, 16.8604651163],
[0.409689922481, 17.4097109549],
[0.450387596899, 17.7242954149],
[0.489728682171, 17.9224505739],
[0.527713178295, 18.1204555015],
[0.56976744186, 18.2801514332],
[0.610465116279, 18.3621777537],
[0.651162790698, 18.4829637642],
[0.689147286822, 18.4871702422]
]),

None: np.array([
[0, 3.37209302326],
[0.00406976744186, 4.69037317469],
[0.00813953488372, 5.54353704705],
[0.0108527131783, 6.66786851752],
[0.0149224806202, 7.83110990926],
[0.018992248062, 8.52923502193],
[0.0217054263566, 9.34348897302],
[0.028488372093, 10.3132323779],
[0.0339147286822, 10.8177092723],
[0.0420542635659, 11.4775253891],
[0.0556201550388, 12.1767021213],
[0.0678294573643, 12.6819301725],
[0.0868217054264, 13.1879093804],
[0.116666666667, 13.7726098191],
[0.131589147287, 14.0068205036],
[0.157364341085, 14.3972717986],
[0.187209302326, 14.7881737876],
[0.217054263566, 15.1790757767],
[0.245542635659, 15.4923081546],
[0.288953488372, 15.8847124572],
[0.32015503876, 16.1594856078],
[0.351356589147, 16.4342587585],
[0.37984496124, 16.6699717565],
[0.412403100775, 16.9061354486],
[0.447674418605, 17.1038399135],
[0.489728682171, 17.4185746049],
[0.526356589147, 17.5776696112],
[0.579263565891, 17.7773270837],
[0.647093023256, 17.9398774112],
[0.694573643411, 18.1001742684]
])
}


def getProfile(name):
  data=np.array([[0.0,0.0],[1.0,0.0]])
  
  cp=name.split('/')
  
  case=cp[0]
  
  m=re.search("^(.+)_vs_(.+)$", cp[1])
  yname=m.group(1)
  xname=m.group(2)
  zvalue=None
  
  if '@' in xname:
    xx=xname.split('@')
    xname=xx[0]
    zvalue=float(xx[1])
  
  if case=="rural":
    if (yname=="umeanByUstar" and xname=="zH"):
#      data=np.c_[df[:,xcol]*xfac, df[:,ycol]*yfac] 
      data=umeanByUstar_vs_zH[zvalue]
    elif (yname=="kByUstar2" and xname=="zH"):
      data=kByUstar2_vs_zH[zvalue]
    else:
      raise 'unknown profile identifier'
  else:
    raise 'unknown case'
  
  return data.tolist()
